<%= form_for [:admin, @user], class: "form-horizontal" do |form| %>
  <% if @user.errors.any? %>
      <div class="row">
        <div class="col-lg-4">
          <div class="panel panel-warning">
            <div class="panel-heading">
              <i class="fa fa-warning"></i> <%= pluralize(@user.errors.count, "lỗi") %> đã xảy ra:
            </div>
            <div class="panel-body">
              <ul>
                <% @user.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
                <% end %>
              </ul>
            </div>
          </div>
        </div>
      </div>
  <% end %>
  <div class="form-group">
    <label class="col-sm-2 control-label m-t-sm">Họ tên đệm</label>
    <div class="col-sm-10 m-b-sm m-t-sm">
      <%= form.text_field :first_name, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label">Tên chính</label>
    <div class="col-sm-10 m-b-sm">
      <%= form.text_field :last_name, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label">Email</label>
    <div class="col-sm-10 m-b-sm">
      <%= form.email_field :email,class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label">Ngày tháng năm sinh</label>
    <div class="col-sm-10 m-b-sm">
      <%= form.text_field :birthday, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label">Số điện thoại</label>
    <div class="col-sm-10 m-b-sm">
      <%= form.text_field :cell_phone, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label">Địa chỉ</label>
    <div class="col-sm-10 m-b-sm">
      <%= form.text_field :address, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label">Thông tin thêm</label>
    <div class="col-sm-10 m-b-sm">
      <%= form.text_area :bio, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label">Số fax</label>
    <div class="col-sm-10 m-b-sm">
      <%= form.text_field :fax, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label">Công ty</label>
    <div class="col-sm-10 m-b-sm">
      <%= form.collection_select(:company_id, Company.all, :id, :name, {:include_blank => ("Vui lòng chọn công ty"), hide_label: true}, class: "form-control m-b") %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label">Phòng ban</label>
    <div class="col-sm-10 m-b-sm">
      <%= form.collection_select(:group_id, Group.all, :id, :name, {:include_blank => ("Vui lòng chọn công phòng ban"), hide_label: true}, class: "form-control m-b") %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label">Ảnh</label>
    <div class="col-sm-10 m-b-sm">
      <%= form.file_field :avatar, class:"hidden", onchange:"readURL(this);" %>
      <label for="user_avatar" class="btn btn-default" id="avatar-upload">
        <i class="fa fa-file-image-o" aria-hidden="true"></i> Chọn hình ảnh
      </label>
      <img id="img_prev" src="https://geracilawfirm.com/wp-content/uploads/2019/12/FILLER-no-headshot.png" alt="your image" width="240" height="200" class="m-l" />
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-4 col-sm-offset-2 m-t-sm">
      <%= link_to "Quay lại", admin_groups_path, class: "btn btn-white m-r-xs" %>
      <%= form.submit class:"btn btn-primary" %>
    </div>
  </div>
<% end %>

<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            let reader = new FileReader();

            reader.onload = function (e) {
                $('#img_prev')
                    .attr('src', e.target.result)
                    .width(200)
                    .height(200);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }
</script>

